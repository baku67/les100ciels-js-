<div id="contentSectionAcrylique" class="acrylique-content-fade">


    <!-- Titre et back to acryliques Btn -->
    <div class="subTitleAcrylique">
        <i id="acryliqueBackBtn2" class="acryliqueBackBtn fa-solid fa-arrow-left"></i>
        <h2 class="subTitle">L'esprit et l'épouse</h2>
    </div>


    <!-- <!- - liste des images - -> -->
    <div class="galleryShortcuts">

        <div class="gallery-item">
            <img src="toiles/4-min.jpg" alt="Toile 11">
            <p class="titleImage">Titre image 1</p>
            <p class="descriptionImage">Description image 1</p>
            <p class="indexImage">1</p>
        </div>

        <div class="gallery-item">
            <img src="toiles/5-min.jpg" alt="Toile 12">
            <p class="titleImage">Titre image 2</p>
            <p class="descriptionImage">Description image 2</p>
            <p class="indexImage">2</p>
        </div>

        <div class="gallery-item">
            <img src="toiles/6-min.jpg" alt="Toile 13">
            <p class="titleImage">Titre image 3</p>
            <p class="descriptionImage">Description image 3</p>
            <p class="indexImage">3</p>
        </div>

        <div class="gallery-item">
            <img src="toiles/7-min.jpg" alt="Toile 14">
            <p class="titleImage">Titre image 4</p>
            <p class="descriptionImage">Description image 4</p>
            <p class="indexImage">4</p>
        </div>

        <div class="gallery-item">
            <img src="toiles/9-min.jpg" alt="Toile 14">
            <p class="titleImage">Titre image 5</p>
            <p class="descriptionImage">Description image 5</p>
            <p class="indexImage">5</p>
        </div>

        <div class="gallery-item">
            <img src="toiles/10-min.jpg" alt="Toile 14">
            <p class="titleImage">Titre image 6</p>
            <p class="descriptionImage">Description image 6</p>
            <p class="indexImage">6</p>
        </div>

        <div class="gallery-item">
            <img src="toiles/11-min.jpg" alt="Toile 14">
            <p class="titleImage">Titre image 7</p>
            <p class="descriptionImage">Description image 7</p>
            <p class="indexImage">7</p>
        </div>

        <div class="gallery-item">
            <img src="toiles/12-min.jpg" alt="Toile 14">
            <p class="titleImage">Titre image 8</p>
            <p class="descriptionImage">Description image 8</p>
            <p class="indexImage">8</p>
        </div>

        <div class="gallery-item">
            <img src="toiles/13-min.jpg" alt="Toile 14">
            <p class="titleImage">Titre image 9</p>
            <p class="descriptionImage">Description image 9</p>
            <p class="indexImage">9</p>
        </div>

    </div>

</div>



<script>

    var imagesObj = [
        {
            index: 1,
            title: "Titre image 1",
            src: "toiles/4-min.jpg",
            description: "Description image 1",
        },
        {
            index: 2,
            title: "Titre image 2",
            src: "toiles/5-min.jpg",
            description: "Description image 2",
        },
        {
            index: 3,
            title: "Titre image 3",
            src: "toiles/6-min.jpg",
            description: "Description image 3",
        },
        {
            index: 4,
            title: "Titre image 4",
            src: "toiles/7-min.jpg",
            description: "Description image 4",
        },
        {
            index: 5,
            title: "Titre image 5",
            src: "toiles/9-min.jpg",
            description: "Description image 5",
        },
        {
            index: 6,
            title: "Titre image 6",
            src: "toiles/10-min.jpg",
            description: "Description image 6",
        },
        {
            index: 7,
            title: "Titre image 7",
            src: "toiles/11-min.jpg",
            description: "Description image 7",
        },
        {
            index: 8,
            title: "Titre image 8",
            src: "toiles/12-min.jpg",
            description: "Description image 8",
        },
        {
            index: 9,
            title: "Titre image 9",
            src: "toiles/13-min.jpg",
            description: "Description image 9",
        },
    ]

    // trouver l'objet selon index:
    function findByPropertyValue(array, property, value) {
        return array.find(function(element) {
            return element[property] === value;
        });
    }



    // onclick previews => modal :
    galleryItems = document.querySelectorAll(".gallery-item");
    var index = 0;

    galleryItems.forEach(function(item) {

        item.addEventListener("click", function() {

            // *** NAVIGATION prev/next image modal
            // get l'index pour équivalent [] 
            index = +item.querySelector('.indexImage').innerText;

            document.getElementById('modalPreviewNext').addEventListener("click", function() {

                if(index+1 > imagesObj.length) {
                    var nextImg = findByPropertyValue(imagesObj, 'index', 1);
                    index = 1;
                }
                else {
                    var nextImg = findByPropertyValue(imagesObj, 'index', index+1);
                    index += 1;
                }

                document.getElementById('modalPreviewImg').src = nextImg.src;
                document.getElementById('modalPreviewTitle').textContent = nextImg.title;
                document.getElementById('modalPreviewDescription').textContent = nextImg.description;

                // Puce pagination:
                paginationClick(index);
            });

            document.getElementById('modalPreviewPrevious').addEventListener("click", function() {

                if(index-1 < 1) {
                    var prevImg = findByPropertyValue(imagesObj, 'index', imagesObj.length);
                    index = imagesObj.length;
                }
                else {
                    var prevImg = findByPropertyValue(imagesObj, 'index', index-1);
                    index -= 1;
                }

                document.getElementById('modalPreviewImg').src = prevImg.src;
                document.getElementById('modalPreviewTitle').textContent = prevImg.title;
                document.getElementById('modalPreviewDescription').textContent = prevImg.description;

                // Puce pagination:
                paginationClick(index);
            });


            // Pagination ajout .selected sur puce associée
            document.getElementById(`paginationNbr${index}`).classList.add('selectedPagination');


            // *** Modif modal 
            document.getElementById('modalPreviewImg').src = item.querySelector('img').src;
            document.getElementById('modalPreviewTitle').textContent = item.querySelector('.titleImage').textContent;
            document.getElementById('modalPreviewDescription').textContent = item.querySelector('.descriptionImage').textContent;
            
            document.getElementById('modalPreview').style.display = "block";
            document.getElementById('modalPreview').classList.add("fadeInModalPreview");
            setTimeout(()=> {
                document.getElementById('modalPreview').style.opacity = "1";
                document.getElementById('modalPreview').style.transform = "translateY(0px)";
                document.getElementById('modalPreview').classList.remove("fadeInModalPreview");
            }, 701)
        })
    });






    // pagination modalPreview:
    function paginationClick(targetIndex) {

        var targetImg = findByPropertyValue(imagesObj, 'index', targetIndex);
        index = targetIndex;

            // Style puce selected:
            // remove les .selected
            var paginationPuces = document.getElementsByClassName('paginationPuce');
            Array.from(paginationPuces).forEach(function(elem) {
                elem.classList.remove('selectedPagination');
            });
            // ajout .selected à la puce cliquée
            var currentIcon = document.getElementById(`paginationNbr${targetIndex}`);
            currentIcon.classList.add('selectedPagination');

        document.getElementById('modalPreviewImg').src = targetImg.src;
        document.getElementById('modalPreviewTitle').textContent = targetImg.title;
        document.getElementById('modalPreviewDescription').textContent = targetImg.description;
    }
    
    var paginationContent = "";

    for (let index = 1; index <= imagesObj.length; index++) {
        paginationContent += `<i id='paginationNbr${index}' onclick='paginationClick(${index})' class='paginationPuce fa-solid fa-circle'></i>`;
    }
    document.getElementById('modalPreviewPaginationDiv').innerHTML = paginationContent;









    // Back Btn to "peinture acrylique"
    document.getElementById("acryliqueBackBtn2").addEventListener("click", function() {

        document.getElementById("contentSectionAcrylique").classList.remove('acrylique-content-fade');
        document.getElementById("contentSectionAcrylique").style.opacity = "1";
        document.getElementById("contentSectionAcrylique").classList.add('acrylique-content-fadeOut');

        var svgArbreGroup = document.getElementById('svgArbreGroup');


        svgArbreGroup.classList.add('svgFadeOut');
        setTimeout(function() {

            svgArbreGroup.style.opacity = "0";
            svgArbreGroup.classList.remove('svgFadeOut');

            $("#gallery").load("peinture-links.html", function() {

                // *** load svg arbre (retour sur rubriques)
                var xhr = new XMLHttpRequest();
                xhr.open('GET', '../arbre_de_vie-gContent.svg', true);
                xhr.onload = function() {
                    if (xhr.status >= 200 && xhr.status < 300) {

                        svgArbreGroup.innerHTML = xhr.responseText;
                        svgArbreGroup.classList.add('svgFadeIn');
                        setTimeout(()=> {
                            svgArbreGroup.style.opacity = "1";
                            svgArbreGroup.classList.remove('svgFadeIn');
                        }, 701)

                    } else {
                        console.error('Failed to load external SVG: ' + xhr.statusText);
                    }
                };
                xhr.send();

            });
        }, 701);
    })
</script>
